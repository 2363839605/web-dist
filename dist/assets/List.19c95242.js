import{bI as M,b as z,h as t,ae as f,L as v,aM as h,az as D,dr as x,t as $,aO as p,S as C,ax as L,al as P,aw as A,b5 as o,cm as _,cQ as B,ad as E,l as T,a as W,m as S,x as H,ds as K,dt as F,du as G,E as j,G as R,a1 as q,a4 as Q}from"./index.739d1244.js";import{b as U}from"./Folder.b0c03566.js";import{u as V}from"./index.ae1f1040.js";import{q as J}from"./index.c8c77bc2.js";import{g as N,O as X}from"./icon.0675b9f4.js";import{u as Y,I as O,a as I}from"./helper.f7d2f447.js";import"./Layout.034ee7cf.js";import"./useTitle.0297e5df.js";import"./FolderTree.22f0bf5c.js";import"./video_box.134f3900.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./Paginator.2ca246c4.js";import"./index.1c773f72.js";import"./index.22d0cb3c.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],Z=e=>{const{isHide:s}=M();if(s(e.obj))return null;const{setPathAs:b}=V(),{show:m}=U({id:1}),{pushHref:l,to:a}=z(),{isMouseSupported:c}=I(),d=Y(),u=()=>T.list_item_filename_overflow;return t(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(f,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get["data-index"](){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:v()}},as:J,get href(){return e.obj.name},get cursor(){return!c()&&(!h()||d())?"pointer":"default"},get bgColor(){return D(()=>!!e.obj.selected,!0)()?v():void 0},"on:dblclick":n=>{!c()||n.ctrlKey||n.metaKey||n.shiftKey||a(l(e.obj.name))},"on:click":n=>{if(c())return n.preventDefault();if(!!h()){if(n.preventDefault(),d()){a(l(e.obj.name));return}x(e.index,!e.obj.selected)}},onMouseEnter:()=>{b(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{$(()=>{p(!1),x(e.index,!0,!0)}),m(n,{props:e.obj})},get children(){return[t(f,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(C,{get when(){return h()},get children(){return t(O,{"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{x(e.index,n.target.checked)}})}}),t(L,{class:"icon",boxSize:"$6",get color(){return P()},get as(){return N(e.obj)},mr:"$1","on:click":n=>{e.obj.type===X.IMAGE&&(n.stopPropagation(),n.preventDefault(),A.emit("gallery",e.obj.name))}}),t(o,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:u()==="multi_line"?"unset":"nowrap","overflow-x":u()==="scrollable"?"auto":"hidden",textOverflow:u()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(o,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return _(e.obj.size)}}),t(o,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return B(e.obj.modified)}})]}})}})},fe=()=>{const e=W(),[s,b]=S(),[m,l]=S(!1);H(()=>{s()&&K(s(),m())});const a=i=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:i.textAlign,cursor:"pointer",onClick:()=>{i.name===s()?l(!m()):$(()=>{b(i.name),l(!1)})}}),c=i=>{var k,y;const g=Array.from((y=(k=i.dataTransfer)==null?void 0:k.items)!=null?y:[]);for(let w=0;w<g.length;w++)if(g[w].kind==="file"){A.emit("tool","upload"),i.preventDefault();break}},{isMouseSupported:d,registerSelectContainer:u,captureContentMenu:n}=I();return u(),t(Q,{onDragOver:c,"oncapture:contextmenu":n,get classList(){return{"viselect-container":d()}},class:"list",w:"$full",spacing:"$1",get children(){return[t(f,{class:"title",w:"$full",p:"$2",get children(){return[t(f,{get w(){return r[0].w},spacing:"$1",get children(){return[t(C,{get when(){return h()},get children(){return t(O,{get checked(){return F()},get indeterminate(){return G()},onChange:i=>{p(i.target.checked)}})}}),t(o,j(()=>a(r[0]),{get children(){return e(`home.obj.${r[0].name}`)}}))]}}),t(o,j({get w(){return r[1].w}},()=>a(r[1]),{get children(){return e(`home.obj.${r[1].name}`)}})),t(o,j({get w(){return r[2].w}},()=>a(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return e(`home.obj.${r[2].name}`)}}))]}}),t(R,{get each(){return q.objs},children:(i,g)=>t(Z,{obj:i,get index(){return g()}})})]}})};export{fe as default};
